generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model actualites {
  id           BigInt   @id @default(autoincrement()) @db.UnsignedBigInt
  category     String   @db.VarChar(100)
  title        String   @db.VarChar(255)
  description  String?  @db.Text
  image_url    String?  @db.VarChar(500)
  link         String?  @db.VarChar(500)
  published_at DateTime @db.Date
  created_at   DateTime @default(now()) @db.Timestamp(0)
  updated_at   DateTime @default(now()) @db.Timestamp(0)
}

model administration {
  id         Int      @id @default(autoincrement()) @db.UnsignedInt
  username   String   @unique(map: "username") @db.VarChar(64)
  password   String   @db.VarChar(100)
  created_at DateTime @default(now()) @db.DateTime(0)
}

model matier {
  id               Int                @id @default(autoincrement()) @db.UnsignedInt
  code             String             @unique(map: "code") @db.VarChar(32)
  name             String             @db.VarChar(120)
  created_at       DateTime           @default(now()) @db.DateTime(0)
  matier_schedules matier_schedules[]
}

model matier_schedules {
  id             Int       @id @default(autoincrement()) @db.UnsignedInt
  matier_id      Int       @db.UnsignedInt
  file_url       String    @db.VarChar(255)
  effective_date DateTime? @db.Date
  uploaded_at    DateTime  @default(now()) @db.DateTime(0)
  matier         matier    @relation(fields: [matier_id], references: [id], onDelete: Cascade, onUpdate: Restrict, map: "matier_schedules_ibfk_1")

  @@index([effective_date], map: "effective_date")
  @@index([matier_id, uploaded_at], map: "matier_id")
}
